(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d098b"],{"693e":function(e,t,l){"use strict";l.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col"},[e.withTitle?t("div",{staticClass:"flex flex-row items-center"},[t("span",{staticClass:"text-lg font-bold"},[e._v("Crear cliente")]),t("div",{staticClass:"ml-auto"},[t("sa-icon-button",{attrs:{"with-bg":"",iconClass:"text-xl bx bx-x"},on:{click:e.cancel}})],1)]):e._e(),t("div",{staticClass:"py-2"},[t("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSavingClient,expression:"loadingSavingClient"}],ref:"clientForm",attrs:{model:e.client,rules:e.formRules}},[t("el-form-item",{attrs:{prop:"fullName"}},[t("span",[e._v("Nombre completo")]),t("el-input",{model:{value:e.client.fullName,callback:function(t){e.$set(e.client,"fullName",t)},expression:"client.fullName"}})],1),t("el-form-item",{attrs:{prop:"email"}},[t("span",[e._v("Email")]),t("el-input",{model:{value:e.client.email,callback:function(t){e.$set(e.client,"email",t)},expression:"client.email"}})],1),t("div",{staticClass:"w-full flex flex-col lg:flex-row"},[t("el-form-item",{staticClass:"w-full lg:w-24 mx-2",attrs:{prop:"countryCode"}},[t("span",[e._v("CÃ³digo de Area")]),t("el-input",{attrs:{type:"number"},model:{value:e.client.countryCode,callback:function(t){e.$set(e.client,"countryCode",t)},expression:"client.countryCode"}},[t("i",{staticClass:"bx bx-plus",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("el-form-item",{staticClass:"w-full lg:w-3/4 mx-2",attrs:{prop:"phone"}},[t("span",[e._v("TelÃ©fono")]),t("el-input",{model:{value:e.client.phone,callback:function(t){e.$set(e.client,"phone",t)},expression:"client.phone"}})],1)],1),e._e(),t("el-form-item",{attrs:{prop:"contactDNI"}},[t("span",[e._v("Numero de IdentificaciÃ³n")]),t("el-input",{model:{value:e.client.dni,callback:function(t){e.$set(e.client,"dni",t)},expression:"client.dni"}})],1),t("el-form-item",{attrs:{prop:"contactDescription"}},[t("span",[e._v("DirecciÃ³n")]),t("el-input",{attrs:{type:"textarea"},model:{value:e.client.contactDescription,callback:function(t){e.$set(e.client,"contactDescription",t)},expression:"client.contactDescription"}})],1),e._e()],1)],1),e.errorMessage?t("div",[t("span",{staticClass:"text-red-500"},[e._v(e._s(e.errorMessage))])]):e._e(),t("div",{staticClass:"flex justify-end flex-row space-x-4"},[t("sa-button",{staticClass:"text-right",attrs:{type:"secondary"},on:{click:e.cancel}},[e._v(" Cancelar ")]),t("sa-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSavingClient,expression:"loadingSavingClient"}],staticClass:"text-right",attrs:{type:"primary"},on:{click:e.save}},[e._v(" Guardar ")])],1)])},a=[],n=l("5a50"),s=l("c134"),o=l("0517"),c={name:"ClientForm",props:{client:{type:Object,default:()=>({id:null,fullName:null,email:null,phone:null,countryCode:null,contactType:null,contactDescription:null,sendEmailNotifications:!1,dni:null})},withTitle:{type:Boolean,default:()=>!1}},mixins:[o["a"]],data(){return{formRules:{fullName:[{required:!0,message:"Captura nombre y apellido del cliente"}],countryCode:[{required:!0,message:"Captura el CÃ³digo de Area del cliente"}],phone:[{required:!0,message:"Captura el telÃ©fono del cliente"}],contactType:[{required:!0,message:"Selecciona el medio de contacto"}]},errorMessage:null,loadingSavingClient:!1,contactTypes:[]}},created(){this.contactTypes=this.loadContactTypes()},methods:{cancel(){this.$emit("onCancel")},async save(){this.$refs["clientForm"].validate(async e=>{e&&await this.saveClient()})},async saveClient(){try{var e,t;this.client.countryCode=this.client.countryCode.replace("+",""),this.loadingSavingClient=!0;const l=this.client.id?await s["a"].update(this.client.id,{...this.client,contactType:n["e"].Phone,email:null===(t=this.client.email)||void 0===t?void 0:t.toLowerCase(),sendEmailNotifications:!0}):await s["a"].create({...this.client,contactType:n["e"].Phone,email:null===(e=this.client.email)||void 0===e?void 0:e.toLowerCase(),sendEmailNotifications:!0});this.$emit("onSaved",l)}catch(o){this.errorMessage=this.getErrorMessage(o),this.loadingSavingClient=!1}},loadContactTypes(){return[{id:n["e"].Phone,label:"TelÃ©fono"},{id:n["e"].Whatsapp,label:"Whatsapp"},{id:n["e"].Email,label:"Email"},{id:n["e"].Other,label:"Otro"}]}}},r=c,d=l("2877"),p=Object(d["a"])(r,i,a,!1,null,null,null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0d098b.084ac473.js.map