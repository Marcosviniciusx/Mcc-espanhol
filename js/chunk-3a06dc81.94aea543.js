(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a06dc81"],{d4b0:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"flex flex-row pb-3"},[e("div",{staticClass:"w-1/2"},[e("el-input",{attrs:{placeholder:"Buscar por nombre, apellido o correo electrÃ³nico"},model:{value:t.querySearch,callback:function(e){t.querySearch=e},expression:"querySearch"}},[e("i",{staticClass:"mt-2 text-xl bx bx-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)]),e("div",{staticClass:"block w-full overflow-x-auto"},[e("table",{staticClass:"items-center w-full border-collapse"},[t._m(0),e("tbody",[t.suppliers.length?t._e():e("tr",[e("td",{attrs:{colspan:8}},[e("div",{staticClass:"flex flex-col w-full py-8 text-center"},[e("span",[t._v(t._s(t.emptyMessage))])])])]),t._l(t.suppliers,(function(s){return e("tr",{key:s.id,staticClass:"cursor-pointer hover:bg-gray-100 hover:shadow"},[e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"50px",width:"50px"}},[e("el-popover",{attrs:{placement:"right",width:"100",trigger:"hover"}},[e("div",{staticClass:"w-full flex flex-row text-center"},[e("div",{staticClass:"w-1/2"},[e("button",{staticClass:"el-button--primary rounded-full cursor-pointer",attrs:{title:"Editar"},on:{click:function(e){return t.onEdit(s)}}},[e("i",{staticClass:"bx bx-edit",staticStyle:{padding:"4px","font-size":"20px"}})])]),e("div",{staticClass:"w-1/2"},[e("button",{staticClass:"el-button--danger rounded-full cursor-pointer",attrs:{title:"Eliminar"},on:{click:function(e){return t.onDelete(s)}}},[e("i",{staticClass:"bx bx-trash",staticStyle:{padding:"4px","font-size":"20px"}})])])]),e("el-button",{staticClass:"w-full",attrs:{slot:"reference",type:"text"},slot:"reference"},[e("button",{staticClass:"el-button--primary rounded-full cursor-pointer"},[e("i",{staticClass:"text-2xl bx bx-chevron-right"})])])],1)],1),e("td",{staticClass:"p-2 border-t"},[t._v(" "+t._s(s.company)+" ")]),e("td",{staticClass:"p-2 border-t"},[t._v(" "+t._s(s.contactFullName)+" ")]),e("td",{staticClass:"p-2 border-t"},[t._v(" "+t._s(s.contactEmail)+" ")]),e("td",{staticClass:"p-2 border-t"},[t._v(" "+t._s(s.contactPhone)+" ")]),e("td",{staticClass:"p-2 border-t"},[t._v(" "+t._s(s.webpage)+" ")]),e("td",{staticClass:"p-2 border-t"},[t._v(" "+t._s(s.contactDescription)+" ")])])}))],2)])])])},r=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"px-2 border-b-2"},[e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"}),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Empresa ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Persona de contact ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Email ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" TelÃ©fono ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Sitio Web ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" DescripciÃ³n ")])])])}],l=s("2ef0"),o=s.n(l),i=s("fb60"),n=s("0517"),c={name:"SuppliersList",mixins:[n["a"]],data(){return{querySearch:null,suppliers:[],loadingSuppliers:!1}},computed:{emptyMessage(){return null!==this.querySearch?`No se encontraron proveedores que coincidan con "${this.querySearch}"`:"No se han agregado proveedores"}},watch:{querySearch:o.a.debounce((async function(t){this.suppliers=await this.loadSuppliers(t)}),500)},async mounted(){this.suppliers=await this.loadSuppliers()},methods:{async loadSuppliers(t){try{return await i["a"].getAll(t)}catch(n){this.$toastr.e(this.getErrorMessage(n))}},onEdit(t){this.$emit("onEdit",t)},onDelete(t){this.$confirm(`Â¿EstÃ¡ seguro que desea eliminar al proveedor ${t.contactFullName}?`,{type:"warning",confirmButtonText:"OK",cancelButtonText:"Cancelar"}).then(async()=>{await this.remove(t)}).catch(()=>{console.log("el catch que no sabemos que hace")})},async remove(t){try{await i["a"].remove(t.id);const e=this.suppliers.findIndex(e=>e.id===t.id);this.suppliers.splice(e,1),this.$toastr.e("Se borro con exito")}catch{this.$toastr.e("OcurriÃ³ un error al eliminar el proveedor")}}}},d=c,u=s("2877"),p=Object(u["a"])(d,a,r,!1,null,null,null);e["default"]=p.exports},fb60:function(t,e,s){"use strict";s.d(e,"a",(function(){return r}));var a=s("c177");class r{static async getAll(t){var e;const s=await a["a"].submit({method:"get",url:"suppliers",parameters:{textSearch:t}});return null!==(e=s.data)&&void 0!==e?e:null}static async getbyId(t){var e;const s=await a["a"].submit({method:"get",url:"suppliers/"+t});return null!==(e=s.data)&&void 0!==e?e:null}static async create(t){var e;const s=await a["a"].submit({method:"post",url:"suppliers",data:t});return null!==(e=s.data)&&void 0!==e?e:null}static async update(t,e){var s;const r=await a["a"].submit({method:"put",url:"suppliers/"+t,data:e});return null!==(s=r.data)&&void 0!==s?s:null}static async remove(t){var e;const s=await a["a"].submit({method:"delete",url:"suppliers/"+t});return null!==(e=s.data)&&void 0!==e?e:null}}}}]);
//# sourceMappingURL=chunk-3a06dc81.94aea543.js.map