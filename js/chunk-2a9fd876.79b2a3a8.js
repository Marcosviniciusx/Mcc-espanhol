(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a9fd876","chunk-2b774e2e","chunk-1cb29fe6"],{"0c23":function(t,e,s){"use strict";s("8845")},"84a9":function(t,e,s){t.exports=s.p+"img/mini-responsive-samii.cf623f75.png"},8845:function(t,e,s){},a0b4:function(t,e,s){},c987:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("nav",{staticClass:"fixed top-0 z-50 w-full h-14"},[e("the-header-app",{attrs:{onMenuClick:t.onMenuClick}})],1),e("div",{staticClass:"min-h-screen bg-gray-50 header-app-height-check"},[e("aside",{staticClass:"fixed h-screen border-r border-gray-200",class:t.collapsed?"w-16":"w-64"},[e("the-menu-app",{attrs:{collapsed:t.collapsed,disabled:t.disabled}})],1),e("main",{staticClass:"mt-14",class:t.collapsed?"ml-16":"ml-64"},[t._t("default")],2)])])},r=[],i=(s("14d9"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-white border-b border-gray-200 shadow"},[e("div",{staticClass:"flex flex-wrap items-center px-4 py-2"},[e("div",{staticClass:"mr-4"},[e("sa-icon-button",{attrs:{"with-bg":"",iconClass:"text-xl bx bx-menu"},on:{click:function(e){return e.stopPropagation(),t.onMenuClick.apply(null,arguments)}}})],1),e("div",{staticClass:"flex flex-row flex-wrap items-center space-x-1 no-underline",on:{click:function(e){return t.$router.push({to:"/home"})}}},[t.logo?t._e():e("img",{staticClass:"m-1",attrs:{src:s("84a9"),alt:"",width:"20px"}}),t.logo?e("img",{staticClass:"m-1",attrs:{src:t.logo,alt:"",width:"20px"}}):t._e(),e("span",{staticClass:"font-bold text-gray-600 text-md font-headline"},[t._v(t._s(t.$store.state.business.name||"Fixme up"))])]),e("div",{staticClass:"flex items-center justify-center flex-grow"},[e("div",{staticClass:"w-4/5 sm:w-4/5 md:w-2/3 lg:w-3/5 xl:w-1/3"},[e("el-input",{staticClass:"border rounded-md",attrs:{placeholder:"Buscar en Ã“rdenes, Clientes"},on:{focus:function(e){t.search="",t.orders=[],t.clients=[]},input:t.querySearchAsync},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t.orders.length>0||t.clients.length>0?e("div",{staticStyle:{position:"fixed","z-index":"2","background-color":"white",padding:"10px",width:"300px","border-color":"rgb(139, 92, 246)","border-width":"1px"}},[e("div",{staticStyle:{"max-height":"500px","overflow-y":"scroll"}},[e("div",[t._m(0),0===t.clients.length?e("div",{staticClass:"ml-3 pb-2 pt-2"},[t._v(" No hay resultados. ")]):t._e(),t._l(t.clients,(function(s){return e("div",{key:s.id,staticClass:"ml-3 pb-2 pt-2 cursor-pointer"},[e("a",{on:{click:function(e){return t.handleSelectSearch(s,"client")}}},[t._v(t._s(null===s||void 0===s?void 0:s.fullName))])])}))],2),e("div",[t._m(1),0===t.orders.length?e("div",{staticClass:"ml-3 pb-2 pt-2"},[t._v(" No hay resultados. ")]):t._e(),t._l(t.orders,(function(s){return e("div",{key:s.id,staticClass:"ml-3 pb-2 pt-2 cursor-pointer"},[e("a",{on:{click:function(e){return t.handleSelectSearch(s,"order")}}},[t._v(t._s(s.reference))])])}))],2)])]):t._e()],1)]),e("ul",{staticClass:"flex flex-row items-center flex-shrink ml-auto"},[e("quick-start-tip",{attrs:{title:"Acciones Rapidas",content:"Con este boton tendras acceso rapido a las acciones\n        mas comunes que puedes hacer en SAMII",placement:"bottom","bg-purple":1===t.$store.state.quickStart.step,"rounded-full":1===t.$store.state.quickStart.step,value:1===t.$store.state.quickStart.step},on:{onNextStep:t.handleNextStep}},[t.$store.state.account.membershipLimitReached?t._e():e("li",[e("el-dropdown",{attrs:{trigger:"click"}},[e("sa-icon-button",{attrs:{id:"quick-actions-menu",iconClass:"text-4xl bx bx-plus-circle "+(1===t.$store.state.quickStart.step?"text-white":"text-purple-500")}}),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("quick-start-tip",{attrs:{title:"Crear Orden",content:"Da click en la opcion 'Crear orden' para acceder de manera rapida\n                al formulario de las ordenes",placement:"left-start","bg-purple":2===t.$store.state.quickStart.step,value:2===t.$store.state.quickStart.step},on:{onNextStep:t.handleNextStep}},[e("el-dropdown-item",[e("el-button",{staticClass:"text-gray-700",class:{"hover:text-purple-500":0===t.$store.state.quickStart.step},attrs:{type:"text",disabled:0!==t.$store.state.quickStart.step},on:{click:function(e){return t.$router.push({name:"orders.create"})}}},[e("span",{staticClass:"flex items-center",class:{"text-white":2===t.$store.state.quickStart.step}},[e("i",{staticClass:"text-xl bx bx-task"}),t._v(" Crear Orden ")])])],1)],1),e("el-dropdown-item",[e("el-button",{staticClass:"text-gray-700 hover:text-purple-500",attrs:{type:"text",disabled:0!==t.$store.state.quickStart.step},on:{click:function(e){return t.$router.push({name:"products.create"})}}},[e("span",{staticClass:"flex items-center"},[e("i",{staticClass:"text-xl bx bxs-package"}),t._v(" Agregar Producto ")])])],1),e("el-dropdown-item",[e("el-button",{staticClass:"text-gray-700 hover:text-purple-500",attrs:{type:"text",disabled:0!==t.$store.state.quickStart.step},on:{click:function(e){return t.$router.push({name:"clients.create"})}}},[e("span",{staticClass:"flex items-center"},[e("i",{staticClass:"text-xl bx bx-user"}),t._v(" Crear Cliente ")])])],1),e("el-dropdown-item",[e("el-button",{staticClass:"text-gray-700 hover:text-purple-500",attrs:{type:"text",disabled:0!==t.$store.state.quickStart.step},on:{click:function(e){return t.$router.push({name:"suppliers.create"})}}},[e("span",{staticClass:"flex items-center"},[e("i",{staticClass:"text-xl bx bxs-truck"}),t._v(" Crear Proveedor ")])])],1)],1)],1)],1)]),t.$store.state.account.membershipLimitReached?t._e():e("li",{staticClass:"flex items-center"},[e("el-popover",{attrs:{placement:"bottom",width:"500","popper-class":"notifications-popper"}},[e("notifications-mini-list"),e("el-button",{staticClass:"w-full p-0 text-gray-500 cursor-pointer hover:bg-gray-200 rounded-md",attrs:{slot:"reference",type:"text"},slot:"reference"},[e("span",{staticClass:"flex items-center p-2 space-x-2 relative"},[e("i",{staticClass:"text-xl bx bx-bell"}),t.hasNotifications?e("span",{staticClass:"font-semibold absolute top-1 right-1"},[e("i",{staticClass:"text-xs text-red-400 bx bxs-circle"})]):t._e()])])],1)],1),e("li",[e("el-dropdown",{attrs:{trigger:"click"}},[e("div",{staticClass:"p-2 px-3 text-gray-700 rounded el-dropdown-link hover:bg-gray-200"},[e("span",{staticClass:"font-bold"},[t._v(" "+t._s(t.fullname)+" "),e("i",{staticClass:"el-icon-arrow-down el-icon--right"})])]),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[1!==t.$store.state.account.accountType?e("el-dropdown-item",[e("el-button",{staticClass:"text-gray-700 hover:text-purple-500",attrs:{type:"text"},on:{click:function(e){return t.navigate("my-data")}}},[e("span",{staticClass:"flex items-center"},[e("i",{staticClass:"text-xl bx bxs-user-circle"}),t._v(" Configurar mi cuenta ")])])],1):t._e(),1===t.$store.state.account.accountType?e("el-dropdown-item",[e("el-button",{staticClass:"text-gray-700 hover:text-purple-500",attrs:{type:"text"},on:{click:function(e){return t.navigate("my-business")}}},[e("span",{staticClass:"flex items-center"},[e("i",{staticClass:"text-xl bx bxs-cog"}),t._v(" Administrar mi negocio ")])])],1):t._e(),e("el-dropdown-item",{attrs:{divided:""}},[e("el-button",{staticClass:"text-gray-700 hover:text-purple-500",attrs:{type:"text"},on:{click:function(e){return t.logout()}}},[e("span",{staticClass:"flex items-center"},[e("i",{staticClass:"text-xl bx bx-log-out-circle"}),t._v(" Cerrar sesiÃ³n ")])])],1)],1)],1)],1)],1)])])}),l=[function(){var t=this,e=t._self._c;return e("h3",[e("strong",[t._v("Clientes")])])},function(){var t=this,e=t._self._c;return e("h3",[e("strong",[t._v("Ordenes")])])}],o=s("2751"),n=s("7459"),c=s("cfd9"),d=s("7ab9"),u=s("4cf1"),p={name:"TheHeaderApp",props:{onMenuClick:Function},components:{NotificationsMiniList:()=>s.e("chunk-2d0b64cc").then(s.bind(null,"1d25"))},data(){return{orders:[],clients:[],search:"",timeout:null}},computed:{email(){return this.$store.state.account.email},fullname(){return this.$store.state.account.fullname},businessName(){return this.$store.state.account.businessName},logo(){return d["a"].logo()},hasNotifications(){return!!this.$store.state.notifications.entities.filter(t=>!t.read).length}},methods:{logout(){o["a"].logout(),this.$router.push({name:"landing.index"})},navigate(t){const e=this.$store.state.account.membershipLimitReached?"my-membership":t;this.$router.push({name:"admin.index",params:{slot:e}})},blurSearch(){this.search="",this.clients=[],this.orders=[]},async querySearchAsync(t){if(t.length>2){const e=await n["a"].GlabalSearch.search(t);this.clients=e.clients,this.orders=e.orders}t.length<=2&&(this.clients=[],this.orders=[])},createFilter(t){return e=>0===e.value.toLowerCase().indexOf(t.toLowerCase())},handleSelectSearch(t,e){let s="";"order"===e&&(s=this.$router.resolve({name:"orders.read",params:{id:t.id}})),"client"===e&&(s=this.$router.resolve({name:"orders.index-filter",params:{clientid:t.id,client:t.fullName}})),this.blurSearch(),window.open(s.href,"_blank")},async handleNextStep(){const t=this.$store.state.quickStart.step;if(await this.$store.dispatch(u["b"],{step:t+1}),1===t){const t=document.getElementById("quick-actions-menu");t.click()}if(2===t){const t=await c["a"].getAll({});if(!t.length)return void this.$toastr.e("No existen ordenes");await this.$router.push({name:"orders.read",params:{id:t[0].id,lockScreen:!0,lockScroll:!0}})}}}},h=p,b=(s("d31e"),s("2877")),x=Object(b["a"])(h,i,l,!1,null,null,null),m=x.exports,f=function(){var t=this,e=t._self._c;return e("nav",{},[e("div",{staticClass:"flex flex-col w-full text-gray-500"},[e("div",[e("ul",{staticClass:"flex flex-col flex-grow py-6 space-y-1",class:{disabled:t.disabled}},[e("li",{staticClass:"flex-grow border-purple-500 cursor-pointer hover:bg-gray-100",class:{"border-l-4 bg-gray-100 border-purple-500 text-purple-500":t.isCurrentRoute("/home"),disabled:t.disabled},attrs:{id:"home"}},[e("a",{on:{click:function(e){return t.navigate("/home")}}},[e("span",{staticClass:"flex items-center p-2 space-x-2",class:t.collapsed?"justify-center":""},[e("i",{staticClass:"text-xl bx bxs-dashboard"}),t.collapsed?t._e():e("span",{staticClass:"font-semibold"},[t._v("Inicio")])])])]),t.collapsed?t._e():e("li",{attrs:{id:"sub-title"}},[e("span",{staticClass:"flex px-4 my-2 mt-4 text-sm font-bold text-gray-400 uppercase"},[t._v("Mi taller")])]),t._l(t.menu,(function(s){return e("li",{key:s.routePath,staticClass:"flex-grow border-purple-500 hover:bg-gray-100",class:{"border-l-4 bg-gray-100 border-purple-500":t.isCurrentRoute(s.routePath),disabled:t.disabled}},[e("a",{class:{disabled:t.disabled},on:{click:function(e){return t.navigate(s.routePath)}}},[e("span",{staticClass:"flex items-center p-2 space-x-2",class:t.collapsed?"justify-center":""},[e("i",{staticClass:"text-xl",class:s.iconClass}),t.collapsed?t._e():e("span",{staticClass:"font-semibold"},[t._v(t._s(s.label))])])])])})),t.collapsed&&1===t.$store.state.account.accountType?e("li",{staticClass:"flex-grow border-purple-500 cursor-pointer hover:bg-gray-100 hover:text-purple-500 fixed w-16 bottom-4",class:{disabled:t.disabled}},[t._m(0)]):t._e()],2)]),t.collapsed||1!==t.$store.state.account.accountType?t._e():e("div",{staticClass:"fixed w-64 bottom-4"},[e("div",{staticClass:"flex items-center cursor-pointer",on:{click:function(e){return t.navigate({name:"admin.index",params:{slot:"users-and-permissions"}})}}},[e("span",{staticClass:"w-full flex items-center p-2 space-x-2 hover:bg-gray-100 hover:text-purple-500",class:{"justify-center":t.collapsed,disabled:t.disabled}},[e("i",{staticClass:"text-xl bx bx-mail-send"}),e("span",{staticClass:"font-bold",attrs:{id:"team-invite"}},[t._v("Invitar a mi equipo")])])])])])])},v=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"flex items-center p-2 space-x-2 justify-center"},[e("i",{staticClass:"text-xl bx bx-mail-send"})])}];const C={orders:{label:"Ã“rdenes",routePath:"/orders",iconClass:"bx bx-task"},products:{label:"Inventario",routePath:"/products",iconClass:"bx bxs-package"},clients:{label:"Clientes",routePath:"/clients",iconClass:"bx bx-user"},suppliers:{label:"Proveedores",routePath:"/suppliers",iconClass:"bx bxs-truck"},services:{label:"Servicios",routePath:"/services",iconClass:"bx bx-wrench"},statistics:{label:"EstadÃ­sticas",routePath:"/stats",iconClass:"bx bx-stats"},courses:{label:"Tutoriales",routePath:"/courses",iconClass:"bx bx-play"}};var g={name:"TheMenuApp",props:{collapsed:Boolean,disabled:Boolean},data(){const{canViewStatistics:t}=this.$store.state.account,e=[C.orders,C.products,C.clients,C.suppliers,C.services];return t&&e.push(C.statistics),e.push(C.courses),{menu:e}},methods:{isCurrentRoute(t){return this.$router.currentRoute.path.includes(t)},navigate(t){this.disabled||this.$router.push(t)}}},y=g,w=(s("0c23"),Object(b["a"])(y,f,v,!1,null,"4574b1b3",null)),_=w.exports,k=s("8266"),S={mixins:[k["a"]],components:{TheHeaderApp:m,TheMenuApp:_},created(){window.addEventListener("resize",this.resize),this.resize()},destroyed(){window.removeEventListener("resize",this.resize)},data(){return{collapsed:!1}},computed:{disabled(){return this.$store.state.account.membershipLimitReached}},methods:{resize(){const t=this.getPercentageWidth();this.collapsed="90%"===t},onMenuClick(){this.collapsed=!this.collapsed}}},$=S,O=(s("ec44"),Object(b["a"])($,a,r,!1,null,"2228bb91",null));e["default"]=O.exports},d31e:function(t,e,s){"use strict";s("a0b4")},d7ee3:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"block w-full overflow-x-auto"},[e("table",{staticClass:"items-center w-full border-collapse"},[e("thead",[e("tr",{staticClass:"px-2 border-b-2"},[t.hasActions?e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"}):t._e(),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Orden ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[e("div",{staticClass:"w-full flex flex-row"},[e("span",[t._v("Fecha")]),e("div",{staticClass:"mx-2 font-normal cursor-pointer",on:{click:function(e){return t.sort("createdDate")}}},["desc"===t.sorting.createdDate?e("i",{staticClass:"text-lg bx bx-sort-down text-purple-500"}):t._e(),"asc"===t.sorting.createdDate?e("i",{staticClass:"text-lg bx bx-sort-up text-purple-500"}):t._e()])])]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Cliente ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Asignado a ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Modelo ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Status ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Prioridad ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Fecha compromiso ")]),e("th",{staticClass:"py-3 font-bold text-left border-l-0 border-r-0 whitespace-nowrap"},[t._v(" Total ")])])]),e("tbody",t._l(t.orders,(function(s){var a,r;return e("tr",{key:s.id},[t.hasActions||t.store.state.account.canEditOrders?t._e():e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"50px",width:"50px"}}),t.hasActions&&t.$store.state.account.canEditOrders?e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"50px",width:"50px"}},[e("el-popover",{attrs:{placement:"right",width:"100",trigger:"hover"}},[e("div",{staticClass:"w-full flex flex-row text-center"},[e("div",{staticClass:"w-1/4"},[e("button",{staticClass:"el-button--primary rounded-full cursor-pointer",attrs:{title:"Editar"},on:{click:function(e){return t.onEdit(s)}}},[e("i",{staticClass:"bx bx-edit",staticStyle:{padding:"4px","font-size":"20px"}})])]),e("div",{staticClass:"w-1/4"},[e("button",{staticClass:"el-button--warning rounded-full cursor-pointer",attrs:{title:"Imprimir"},on:{click:function(e){return t.onPrint(s)}}},[e("i",{staticClass:"bx bx-printer",staticStyle:{padding:"4px","font-size":"20px"}})])]),e("div",{staticClass:"w-1/4"},[e("button",{staticClass:"el-button--danger rounded-full cursor-pointer",attrs:{title:"Eliminar"},on:{click:function(e){return t.onDelete(s.id)}}},[e("i",{staticClass:"bx bx-trash",staticStyle:{padding:"4px","font-size":"20px"}})])]),e("div",{staticClass:"w-1/4"},[e("button",{staticClass:"el-button--info rounded-full cursor-pointer",attrs:{title:"Notas"},on:{click:function(e){return t.showOrderNotesManager(s.id)}}},[e("i",{staticClass:"bx bx-note",staticStyle:{padding:"4px","font-size":"20px"}})])])]),e("el-button",{staticClass:"w-full",attrs:{slot:"reference",type:"text"},slot:"reference"},[e("button",{staticClass:"el-button--primary rounded-full cursor-pointer"},[e("i",{staticClass:"text-2xl bx bx-chevron-right"})])])],1)],1):t._e(),e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"125px"}},[t._v(" "+t._s(s.reference)+" ")]),e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"155px"}},[e("el-date-picker",{staticClass:"w-full bg-select-button",attrs:{type:"date",disabled:""},model:{value:s.createdAt,callback:function(e){t.$set(s,"createdAt",e)},expression:"order.createdAt"}})],1),e("td",{staticClass:"p-2 border-t text-left"},[t.hasActions?e("el-popover",{attrs:{placement:"bottom",width:"250",trigger:"click"}},[e("div",{staticClass:"flex flex-col"},[e("div",{staticClass:"flex flex-col py-4"},[e("span",{staticClass:"font-bold"},[t._v(t._s(s.client.fullName))]),e("span",{staticClass:"text-purple-500 underline"},[t._v(t._s(s.client.email))])]),e("div",{staticClass:"py-2 border-t"},[e("sa-button",{staticClass:"w-full",attrs:{type:"secondary"}},[t._v(" Ver cliente ")])],1)]),e("el-button",{staticClass:"text-left",attrs:{slot:"reference",type:"text"},slot:"reference"},[e("span",[t._v(t._s(s.client.fullName))]),e("i",{staticClass:"bx bx-chevron-down"})])],1):e("span",[t._v(t._s(s.client.fullName))])],1),e("td",{staticClass:"p-2 border-t text-left",staticStyle:{"min-width":"125px"}},[t._v(" "+t._s(t.getAssignedAccountName(s))+" ")]),e("td",{staticClass:"p-2 border-t text-left",staticStyle:{"min-width":"100px"}},[t._v(" "+t._s(t.getDeviceModel(s))+" ")]),e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"160px"}},[t.hasActions?e("el-select",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{value:null===(a=s.orderStatus)||void 0===a?void 0:a.name},on:{change:function(e){return t.updateStatus(s.id,e)}}},[e("div",{staticClass:"mt-2 text-xl rounded-sm badge",style:{"background-color":null===(r=s.orderStatus)||void 0===r?void 0:r.colour},attrs:{slot:"prefix"},slot:"prefix"}),t._l(t.statuses,(function(s){return e("el-option",{key:s.value,attrs:{value:s.value,label:s.label}},[e("div",{staticStyle:{display:"inline-flex"}},[e("div",{staticClass:"mt-2 text-xl rounded-sm badge",style:{"background-color":s.color}}),e("div",[t._v(t._s(s.label))])])])}))],2):e("span",[t._v(t._s(t.OrderStatusEnumDict[s.orderStatus]))])],1),e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"100px"}},[t._v(" "+t._s(t.priorities[s.priority])+" ")]),e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"155px"}},[e("el-date-picker",{staticClass:"w-full bg-select-button",attrs:{type:"date",disabled:""},model:{value:s.dueDate,callback:function(e){t.$set(s,"dueDate",e)},expression:"order.dueDate"}})],1),e("td",{staticClass:"p-2 border-t",staticStyle:{"min-width":"110px"}},[t._v(" "+t._s(t.moneyFormat(s.subtotalAmount+s.taxAmount))+" ")])])})),0)])])},r=[],i=(s("14d9"),s("5a50")),l=s("1268"),o=s("ead0"),n=s("e419"),c={name:"OrdersGrid",props:{hasActions:{type:Boolean,default:()=>!0},orders:{type:Array,default:()=>[]}},data(){return{sorting:{createdDate:"desc"},loading:!1,OrderStatusEnumDict:i["l"],statuses:this.$store.state.catalogs.statuses,priorities:{[i["r"].Low]:"Baja",[i["r"].Medium]:"Media",[i["r"].High]:"Alta"}}},methods:{getDeviceModel(t){var e,s,a;return(null===(e=t.orderDevices[0])||void 0===e||null===(s=e.deviceModel)||void 0===s?void 0:s.model)||(null===(a=t.orderDevices[0])||void 0===a?void 0:a.deviceModel)||""},getAssignedAccountName(t){return t.assignedToAccount?t.assignedToAccount.fullname:""},showOrderNotesManager(t){o["a"].show(t)},async updateStatus(t,e){const s=this.orders.find(e=>e.id===t);this.whatsapp(e,s),this.$emit("onStatusUpdate",{orderId:t,status:e})},whatsapp(t,e){if(!e.client.countryCode)return void this.$toastr.e("El Cliente debe tener registrado el CÃ³digo de Area");const s=`Â¿Deseas notificar al cliente ${e.client.fullName} por WhatsApp?`,a={type:"warning",confirmButtonText:"SI",cancelButtonText:"NO"};switch(t){case this.statuses[i["k"].InProgress].value:this.$confirm(s,a).then(async()=>{Object(n["a"])({code:e.client.countryCode,phone:e.client.phone,text:`Tu orden ${e.reference} ya se estÃ¡ trabajando`})});break;case this.statuses[i["k"].ToBeDelivered].value:this.$confirm(s,a).then(async()=>{Object(n["a"])({code:e.client.countryCode,phone:e.client.phone,text:`Hola tu orden ${e.reference} estÃ¡ lista para recogerse`})});break;default:}},moneyFormat(t){const{currencySymbol:e}=this.$store.state.account;return l["a"].moneyFormat(t,e)},onEdit(t){this.$router.push({name:"orders.read",params:{id:t.id}})},onPrint(t){this.$router.push({name:"invoices.default",params:{id:t.id}})},async onDelete(t){const e=this.orders.find(e=>e.id===t);this.$confirm(`Â¿EstÃ¡ seguro que desea eliminar la orden ${e.reference}?`,{type:"warning",confirmButtonText:"OK",cancelButtonText:"Cancelar"}).then(async()=>{this.$emit("onDeleteOrder",t)})},sort(t){this.sorting[t]="asc"===this.sorting[t]?"desc":"asc",this.$emit("onSorting",this.sorting)}}},d=c,u=(s("f546"),s("2877")),p=Object(u["a"])(d,a,r,!1,null,"0b3b3374",null);e["a"]=p.exports},ec44:function(t,e,s){"use strict";s("ec8b")},ec8b:function(t,e,s){},f2b4:function(t,e,s){},f546:function(t,e,s){"use strict";s("f2b4")},f55a:function(t,e,s){"use strict";s.r(e);s("14d9");var a=function(){var t=this,e=t._self._c;return e("app-layout",[e("div",{staticClass:"flex flex-col items-center py-4"},[e("div",{staticClass:"w-full px-12"},[e("div",{staticClass:"flex flex-row items-center py-4"},[e("h1",{staticClass:"text-lg font-bold"},[t._v("Ã“rdenes "),t.client?e("span",[t._v("de "+t._s(this.client))]):t._e()]),e("div",{staticClass:"ml-auto"},[e("sa-button",{staticClass:"items-center px-3 py-3 font-bold rounded",attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"orders.create"})}}},[t._v(" Crear orden ")])],1)]),e("div",{staticClass:"flex flex-col space-y-6"},[e("content-card",[e("orders-list")],1)],1)])])])},r=[],i=s("c987"),l=s("3246"),o=function(){var t=this,e=t._self._c;return e("div",{},[e("el-tabs",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[e("el-tab-pane",{attrs:{label:"Todas",name:"all"}}),e("el-tab-pane",{attrs:{label:"Por asignar",name:""+t.OrderStatusEnum.PendingAssignment}}),e("el-tab-pane",{attrs:{label:"En proceso",name:""+t.OrderStatusEnum.InProgress}}),e("el-tab-pane",{attrs:{label:"Por entregar",name:""+t.OrderStatusEnum.ToBeDelivered}}),e("el-tab-pane",{attrs:{label:"Entregado",name:""+t.OrderStatusEnum.Finalized}}),e("el-tab-pane",{attrs:{label:"Rechazado",name:""+t.OrderStatusEnum.Rejected}}),e("el-tab-pane",{attrs:{label:"Sin SoluciÃ³n",name:""+t.OrderStatusEnum.NoSolution}}),e("el-tab-pane",{attrs:{label:"GarantÃ­a",name:""+t.OrderStatusEnum.Warranty}})],1),e("div",{staticClass:"flex flex-row w-1/2 lg:w-1/3"},[e("div",{staticClass:"flex-1"},[e("el-input",{attrs:{placeholder:"Filtrar..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[e("i",{staticClass:"mt-2 text-xl bx bx-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)]),e("div",{staticClass:"py-2"},[e("orders-grid",{attrs:{orders:t.orders},on:{onDeleteOrder:t.deleteOrder,onStatusUpdate:t.updateStatus,onSorting:t.handleSorting}})],1),e("el-dialog",{attrs:{visible:t.paymentMethod.show,width:t.dialogClientWidth},on:{"update:visible":function(e){return t.$set(t.paymentMethod,"show",e)}}},[e("div",[e("div",{staticClass:"mb-4"},[e("span",{staticClass:"text-md font-bold break-words"},[t._v(" Por favor, selecciona un metodo de pago para finalizar la orden ")])]),e("span",[t._v("Metodo de Pago")]),e("el-select",{staticClass:"w-full",on:{change:t.paymentMethodSelect},model:{value:t.paymentMethod.value,callback:function(e){t.$set(t.paymentMethod,"value",e)},expression:"paymentMethod.value"}},t._l(t.paymentMethods,(function(s){return e("el-option",{key:s.id,attrs:{label:s.name,value:s.id}},[e("div",{staticClass:"flex flex-row items-center"},[e("span",{staticClass:"ml-2"},[t._v(" "+t._s(s.name)+" ")])])])})),1)],1)])],1)},n=[],c=s("cfd9"),d=s("5a50"),u=s("d7ee3"),p=s("8266"),h={name:"OrdersList",components:{OrdersGrid:u["a"]},mixins:[p["a"]],data(){return{orders:[],status:"all",search:null,OrderStatusEnum:d["k"],dialogClientWidth:"30%",paymentMethod:{show:!1,orderId:null,status:null,value:null},paymentMethods:[]}},mounted(){this.loadPaymentMethods(),this.loadOrders(this.status),this.$route.params.status&&(this.status=this.$route.params.status)},watch:{search:{deep:!0,handler:async function(){await this.loadOrders(this.status,this.search)}},status:{deep:!0,handler:async function(){await this.loadOrders(this.status,this.search)}}},methods:{async loadPaymentMethods(){this.paymentMethods=await c["a"].getPaymentMethods()},async loadOrders(t="all",e=""){try{const s={};"all"!==t&&(s.OrderStatusId=this.$store.state.catalogs.statuses[t].value),e&&(s.TextSearch=e);const a=await c["a"].getAll(s),r=this.$route.params.clientid;this.orders=r?a.filter(t=>t.client.id===r):a,this.orders=this.orders.sort((t,e)=>new Date(e.createdAt)-new Date(t.createdAt))}catch(s){console.log("error")}},async deleteOrder(t){this.loading=!0;try{await c["a"].deleteOrder(t),this.orders=this.orders.filter(e=>e.id!==t),this.$toastr.s("Se borro con exito")}catch(e){console.log("error")}finally{this.loading=!1}},async updateOrderStatus(t,e,s){await c["a"].updateStatus({id:t,status:e,paymentMethod:s}),this.$toastr.s("Se actualizo con exito"),await this.loadOrders(this.status,this.search)},paymentMethodSelect(){this.updateOrderStatus(this.paymentMethod.orderId,this.paymentMethod.status,this.paymentMethod.value),this.paymentMethod={show:!1,orderId:null,status:null,value:null}},updateStatus({orderId:t,status:e}){this.loading=!0;try{const{value:s}=this.$store.state.catalogs.statuses[d["k"].Finalized];e===s?(this.paymentMethod={show:!0,orderId:t,status:e,value:null},this.resizeDialogWidth()):this.updateOrderStatus(t,e)}catch(s){console.log("error")}finally{this.loading=!1}},handleSorting(t){const e=Object.keys(t),s=t[e];this.orders=this.orders.sort((t,e)=>"desc"===s?new Date(e.createdAt)-new Date(t.createdAt):new Date(t.createdAt)-new Date(e.createdAt))},resizeDialogWidth(){this.dialogClientWidth=this.getPercentageWidth()}}},b=h,x=s("2877"),m=Object(x["a"])(b,o,n,!1,null,null,null),f=m.exports,v={name:"OrdersIndex",components:{AppLayout:i["default"],ContentCard:l["default"],OrdersList:f},data(){return{query:{state:"Open"},client:!1}},mounted(){const t=this.$route.params.client;t&&(this.client=t)}},C=v,g=Object(x["a"])(C,a,r,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2a9fd876.79b2a3a8.js.map