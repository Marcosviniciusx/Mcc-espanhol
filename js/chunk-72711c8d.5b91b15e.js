(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72711c8d"],{"6d23":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"productForm",attrs:{model:t.form,rules:t.rules}},[e("content-card",{staticClass:"margin-bottom-24"},[e("div",{staticClass:"w-full inline-flex justify-between margin-bottom-24",attrs:{slot:"title"},slot:"title"},[e("strong",[t._v("CategorÃ­a")]),e("a",{staticClass:"text-base text-purple-400",on:{click:t.showCategoryCreate}},[e("span",[t._v("+ Agregar nueva categoria")])])]),e("div",{staticClass:"w-full inline-flex"},[e("el-form-item",{staticClass:"w-full padding-right-8",attrs:{prop:"category"}},[e("el-input",{attrs:{type:"text"},on:{input:function(e){return t.showCategorySearch(!0)}},model:{value:t.textSearch,callback:function(e){t.textSearch=e},expression:"textSearch"}},[e("i",{staticClass:"mt-2 text-xl bx bx-search",attrs:{slot:"prefix"},slot:"prefix"})])],1)],1)]),e("content-card",{staticClass:"margin-bottom-24",attrs:{title:"Producto"}},[e("el-form-item",{attrs:{prop:"name"}},[e("strong",[t._v("Nombre")]),e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{prop:"description"}},[e("strong",[t._v("DescripciÃ³n")]),e("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),e("content-card",{staticClass:"margin-bottom-24",attrs:{title:"Precio"}},[e("div",{staticClass:"w-full inline-flex"},[e("el-form-item",{staticClass:"w-full padding-right-8",attrs:{prop:"cost"}},[e("span",{staticClass:"inline-flex items-center justify-center flex-shrink-0"},[t._v(" Costo ")]),e("el-input",{attrs:{type:"number"},model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost",e)},expression:"form.cost"}})],1),e("el-form-item",{staticClass:"w-full padding-left-8",attrs:{prop:"price"}},[e("span",{staticClass:"inline-flex items-center justify-center flex-shrink-0"},[t._v(" Precio de venta ")]),e("el-input",{attrs:{type:"number"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}})],1)],1)]),e("content-card",{staticClass:"margin-bottom-24",attrs:{title:"Inventario"}},[e("div",{staticClass:"w-full inline-flex"},[e("el-form-item",{staticClass:"w-1/2 padding-right-8",attrs:{prop:"quantity"}},[e("span",{staticClass:"inline-flex items-center justify-center flex-shrink-0"},[t._v(" Existencias ")]),e("el-input",{attrs:{type:"number",disabled:!t.$store.state.account.canEditStockQuantities},model:{value:t.form.quantity,callback:function(e){t.$set(t.form,"quantity",e)},expression:"form.quantity"}})],1)],1)]),e("el-dialog",{attrs:{visible:t.visibleCategorySearch,width:t.width,"append-to-body":""},on:{"update:visible":function(e){t.visibleCategorySearch=e}}},[e("div",[e("div",{staticClass:"w-full flex flex-row px-6 py-4"},[e("el-input",{ref:"textSearch",model:{value:t.textSearch,callback:function(e){t.textSearch=e},expression:"textSearch"}},[e("i",{staticClass:"mt-2 text-xl bx bx-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),e("table",[e("thead",[e("tr",[e("th",[t._v("Nombre")])])]),e("tbody",t._l(t.categories,(function(s){return e("tr",{key:s.id},[e("td",[e("el-checkbox",{attrs:{value:t.selectedCategory===s.id},on:{change:function(e){return t.chooseCategory(s.id)}}},[t._v(" "+t._s(s.name)+" ")])],1)])})),0)]),e("div",{staticClass:"flex flex-row justify-end space-x-2"},[e("el-button",{staticClass:"el-button--default",on:{click:function(e){return t.showCategorySearch(!1)}}},[t._v(" Cancelar ")]),e("el-button",{staticClass:"el-button--primary",attrs:{disabled:!t.selectedCategory},on:{click:function(e){return t.selectCategory()}}},[t._v(" Seleccionar ")])],1)])])],1)},r=[],i=s("f61c"),o=s("179a"),n=s("3678"),c=s("2ef0"),l=s.n(c),u=s("0517"),d=s("8266"),m={name:"ProductForm",props:{loading:Boolean,form:{name:String,description:String,category:Object,brand_model:String,cost:Number,price:Number,quantity:Number,image:String}},mixins:[u["a"],d["a"]],components:{ContentCard:()=>Promise.resolve().then(s.bind(null,"3246"))},data(){return{CategoryEnum:o["a"],errorMessage:void 0,show:!1,rules:{},visibleCategorySearch:!1,categories:[],width:"40%",textSearch:null,selectedCategory:null,subscription:null}},created(){this.subscription=i["a"].subscribe(this.customCommands),window.addEventListener("resize",l.a.debounce(this.resize,300))},destroyed(){this.subscription.unsubscribe(),window.removeEventListener("resize",l.a.debounce(this.resize,300))},mounted(){setTimeout(()=>{var t;this.textSearch=null===(t=this.$props.form.category)||void 0===t?void 0:t.name},1e3)},watch:{},methods:{customCommands({type:t,payload:e}){switch(t){case i["b"].create:this.categoryCreate(e);break;default:}},resize(){const t=this.getPercentageWidth();this.width="30%"===t?"40%":t},showCategoryCreate(){i["c"].show({type:o["a"].Product})},categoryCreate(t){this.form.category=t.id,this.textSearch=t.name},chooseCategory(t){this.selectedCategory=this.selectedCategory===t?null:t},selectCategory(){if(!this.selectedCategory)return;const t=this.categories.find(t=>t.id===this.selectedCategory);this.form.category=t.id,this.textSearch=t.name,this.visibleCategorySearch=!1,this.categories=[]},categoryChange(t){this.form.category=t,this.form.brand_model=void 0},showCategorySearch(t){this.visibleCategorySearch=t,t&&this.loadCategories(),t||(this.textSearch=null)},async loadCategories(){try{this.categories=await n["a"].Product.get({textSearch:this.textSearch})}catch(t){this.errorMessage=t}}}},f=m,h=(s("b25b"),s("2877")),p=Object(h["a"])(f,a,r,!1,null,"a2052d62",null);e["default"]=p.exports},b25b:function(t,e,s){"use strict";s("b486")},b486:function(t,e,s){}}]);
//# sourceMappingURL=chunk-72711c8d.5b91b15e.js.map