(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-166b1eab"],{1740:function(e,t,i){"use strict";i("c47d")},"70cd":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-base font-normal"},[e.deviceModelSelected.id?t("div",{staticClass:"space-x-4 grid text-right"},[t("div",{staticClass:"w-full flex flex-row",staticStyle:{"margin-right":"-1rem","justify-content":"flex-end"}},[t("sa-icon-button",{attrs:{iconClass:"text-xl bx bx-edit "+(3===e.$store.state.quickStart.step?"quick-start-not-selected":""),tooltip:"Cambiar"},on:{click:function(t){return e.showDeviceModelDialog(!0)}}}),t("sa-icon-button",{attrs:{iconClass:"text-xl bx bx-list-check "+(3===e.$store.state.quickStart.step?"quick-start-selected":""),tooltip:"Checklist de RevisiÃ³n"},on:{click:function(t){return e.showChecklistDialog(!0)}}})],1)]):t("div",{staticClass:"space-y-2"},[t("div",{staticClass:"w-full flex justify-between"},[t("span",{staticClass:"font-bold text-md"},[e._v("Modelo del dispositivo")]),t("a",{staticClass:"text-purple-400",on:{click:function(t){return e.showNewDeviceModelDialog(!0)}}},[t("strong",[e._v("+ Agregar nuevo modelo")])])]),t("div",[t("div",{staticClass:"flex flex-row space-x-2"},[t("el-input",{attrs:{type:"text"},on:{input:function(t){return e.showDeviceModelDialog(!0)}},model:{value:e.queryModel.textSearch,callback:function(t){e.$set(e.queryModel,"textSearch",t)},expression:"queryModel.textSearch"}},[t("i",{staticClass:"mt-2 text-xl bx bx-search",attrs:{slot:"prefix"},slot:"prefix"})]),t("sa-button",{attrs:{size:"mini",type:"secondary"},on:{click:function(t){return e.showDeviceModelDialog(!0)}}},[e._v(" Explorar ")])],1)])]),t("el-dialog",{attrs:{visible:e.isVisibleQueryModelDialog,width:e.dialogClientWidth},on:{"update:visible":function(t){e.isVisibleQueryModelDialog=t},opened:e.onOpenQueryModelDialog,close:e.onCloseQueryModelDialog}},[t("div",{staticClass:"-mx-5"},[t("div",{staticClass:"flex flex-row items-center px-6 pb-4 border-b"},[t("span",{staticClass:"text-md"},[e._v("Buscar modelos")]),t("a",{staticClass:"text-purple-400 ml-auto",on:{click:function(t){return e.showNewDeviceModelDialog(!0)}}},[t("strong",[e._v("+ Agregar nuevo modelo")])]),t("div",{staticClass:"ml-4"},[t("sa-icon-button",{attrs:{"with-bg":"",iconClass:"text-xl bx bx-x"},on:{click:function(t){return e.showDeviceModelDialog(!1)}}})],1)]),t("div",{staticClass:"px-6 py-4"},[t("el-input",{ref:"textSearch",attrs:{placeholder:"Teclea una marca o un modelo"},model:{value:e.queryModel.textSearch,callback:function(t){e.$set(e.queryModel,"textSearch",t)},expression:"queryModel.textSearch"}},[t("i",{staticClass:"mt-2 text-xl bx bx-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("div",{staticClass:"max-h-96 overflow-scroll"},[0===e.deviceModels.length?t("div",{staticClass:"py-8 text-center"},[e.queryModel.textSearch?t("div",{staticClass:"inline-block w-full"},[t("i",{staticClass:"text-3xl bx bx-confused"}),t("div",[t("span",[e._v("No se encontraron modelos que coincidan con")]),t("span",{staticClass:"mx-1 italic font-bold"},[e._v(e._s(e.queryModel.textSearch))])])]):e._e()]):e._e(),e._l(e.deviceModels,(function(i){return t("div",{key:i.id,staticClass:"flex flex-row border-t cursor-pointer hover:bg-gray-50",on:{click:function(t){return e.clickDeviceModel(i)}}},[t("div",{staticClass:"w-full px-4 py-2"},[t("div",{staticClass:"flex flex-row items-center w-full space-x-2"},[t("span",[t("i",{class:[i.id===e.deviceModelSelected.id?"bx bx-radio-circle-marked text-xl text-purple-500":"bx bx-radio-circle text-xl text-gray-300"]})]),t("div",{staticClass:"px-2"},[t("span",{staticClass:"font-bold"},[e._v(e._s(i.model)+" - "+e._s(i.brand))]),t("span",{staticClass:"block"},[e._v(e._s(e.CategoryEnumDict[i.deviceType]))])])])])])}))],2),t("div",{staticClass:"px-6 pt-6 border-t"},[t("div",{staticClass:"flex flex-row justify-end space-x-2"},[t("sa-button",{attrs:{type:"secondary"},on:{click:function(t){return e.showDeviceModelDialog(!1)}}},[e._v(" Cancelar ")]),t("sa-button",{attrs:{type:"primary"},on:{click:e.selectDeviceModel}},[e._v(" Seleccionar ")])],1)])])]),t("el-dialog",{attrs:{visible:e.isVisibleChecklistDialog,width:e.dialogClientWidth},on:{"update:visible":function(t){e.isVisibleChecklistDialog=t},opened:e.onOpenChecklistDialog,close:e.onCloseChecklistDialog}},[t("checklist-items-list",{attrs:{items:e.items}})],1),t("el-dialog",{attrs:{visible:e.isVisibleNewDeviceModelDialog,width:e.dialogClientWidth},on:{"update:visible":function(t){e.isVisibleNewDeviceModelDialog=t}}},[t("new-device-model-form",{on:{onCancel:function(t){return e.showNewDeviceModelDialog(!1)},onSave:e.onDeviceModelCreate}})],1)],1)},l=[],o=i("2ef0"),a=i.n(o),c=i("0517"),r=i("8266"),d=i("c26b"),n=i("5a50"),u=i("4081"),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"px-2"},[t("div",{staticClass:"w-full flex flex-row items-center"},[t("span",{staticClass:"text-md font-bold"},[e._v("Agregar nuevo modelo")]),t("div",{staticClass:"ml-auto"},[t("sa-icon-button",{attrs:{"with-bg":"",iconClass:"text-xl bx bx-x"},on:{click:e.cancel}})],1)]),t("div",{staticClass:"w-full flex flex-col pt-2 space-y-4"},[t("div",{staticClass:"w-full flex"},[t("div",{staticClass:"w-full flex flex-row",staticStyle:{"justify-content":"space-between"}},[t("span",[e._v("CategorÃ­a")]),t("a",{staticClass:"text-purple-400",on:{click:function(t){return e.showCreateCategoryDialog(!0)}}},[t("strong",[e._v("+ Agregar nueva categorÃ­a")])])])]),t("div",{staticClass:"flex"},[t("div",{staticClass:"w-full flex flex-row"},[t("el-input",{staticClass:"mr-2",attrs:{type:"text"},on:{input:function(t){return e.showQueryModelDialog(!0)}},model:{value:e.queryModel.textSearch,callback:function(t){e.$set(e.queryModel,"textSearch",t)},expression:"queryModel.textSearch"}},[t("i",{staticClass:"mt-2 text-xl bx bx-search",attrs:{slot:"prefix"},slot:"prefix"})]),t("el-button",{on:{click:function(t){return e.showQueryModelDialog(!0)}}},[e._v(" Explorar ")])],1)])]),t("div",{staticClass:"flex flex-row py-4 space-x-2"},[t("div",{staticClass:"w-1/2"},[t("span",[e._v("Marca")]),t("el-input",{staticClass:"w-full",model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})],1),t("div",{staticClass:"w-1/2"},[t("span",[e._v("Modelo")]),t("el-input",{staticClass:"w-full",model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})],1)]),t("div",{staticClass:"py-2"},[t("div",{staticClass:"flex flex-row justify-end space-x-2"},[t("el-button",{on:{click:e.cancel}},[e._v(" Cancelar ")]),t("sa-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v(" Guardar ")])],1)]),t("el-dialog",{attrs:{"append-to-body":"",visible:e.isVisibleQueryModelDialog,width:e.dialogClientWidth},on:{"update:visible":function(t){e.isVisibleQueryModelDialog=t},opened:e.onOpenQueryModelDialog}},[t("div",{staticClass:"-mx-5"},[t("div",{staticClass:"flex flex-row items-center px-6 pb-4 border-b",staticStyle:{"justify-content":"space-between"}},[t("span",{staticClass:"text-md"},[e._v("Buscar categorÃ­as")]),t("div",{staticClass:"ml-4"},[t("sa-icon-button",{attrs:{"with-bg":"",iconClass:"text-xl bx bx-x"},on:{click:function(t){return e.showQueryModelDialog(!1)}}})],1)]),t("div",{staticClass:"px-6 py-4"},[t("el-input",{ref:"textSearch",attrs:{placeholder:"Teclea una categorÃ­a"},model:{value:e.queryModel.textSearch,callback:function(t){e.$set(e.queryModel,"textSearch",t)},expression:"queryModel.textSearch"}},[t("i",{staticClass:"mt-2 text-xl bx bx-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("div",{staticClass:"max-h-96 overflow-scroll"},e._l(e.deviceCategories,(function(i){var s;return t("div",{key:i.id,staticClass:"flex flex-row border-t cursor-pointer hover:bg-gray-50",on:{click:function(t){return e.categoryChange(i)}}},[t("div",{staticClass:"w-full px-4 py-2"},[t("div",{staticClass:"flex flex-row items-center w-full space-x-2"},[t("span",[t("i",{class:[i.id===(null===(s=e.form.category)||void 0===s?void 0:s.id)?"bx bx-radio-circle-marked text-xl text-purple-500":"bx bx-radio-circle text-xl text-gray-300"]})]),t("div",{staticClass:"px-2"},[t("span",{staticClass:"font-bold"},[e._v(e._s(i.name))])])])])])})),0),t("div",{staticClass:"px-6 pt-6 border-t"},[t("div",{staticClass:"flex flex-row justify-end space-x-2"},[t("sa-button",{attrs:{type:"secondary"},on:{click:function(t){return e.showQueryModelDialog(!1)}}},[e._v(" Cancelar ")]),t("sa-button",{attrs:{type:"primary"},on:{click:e.selectCategory}},[e._v(" Seleccionar ")])],1)])])])],1)},v=[],x=i("f61c"),p=i("179a"),g=i("cfd9"),b={name:"NewDeviceModelForm",mixins:[c["a"],r["a"]],data(){return{dialogClientWidth:"40%",queryModel:{textSearch:null,pageSize:10,pageNumber:1},isVisibleQueryModelDialog:!1,commandSubscription:null,errorMessage:void 0,form:{category:void 0,brand:void 0,model:void 0},deviceCategories:[]}},created(){this.commandSubscription=x["a"].subscribe(this.customCommands),window.addEventListener("resize",a.a.debounce(this.resizeDialogWidth,200)),this.resizeDialogWidth()},destroyed(){this.commandSubscription.unsubscribe(),window.removeEventListener("resize",a.a.debounce(this.resizeDialogWidth,200))},watch:{errorMessage:{deep:!0,handler:a.a.debounce((async function(){this.errorMessage&&(await this.$toastr.e(this.errorMessage),this.errorMessage=void 0)}),300)},"queryModel.textSearch":{deep:!0,handler:a.a.debounce((async function(){await this.loadDeviceCategories(this.queryModel)}),300)}},methods:{customCommands({type:e,payload:t}){switch(e){case x["b"].create:this.categoryCreate(t);break;default:}},categoryCreate(e){e.type===p["a"].Device&&this.categoryChange(e)},categoryChange(e){this.queryModel.textSearch=e.name,this.form.category=e},selectCategory(){this.queryModel.textSearch=this.form.category.name,this.isVisibleQueryModelDialog=!1},resizeDialogWidth(){this.dialogClientWidth=this.getPercentageWidth()},showCreateCategoryDialog(){x["c"].show({type:p["a"].Device})},showQueryModelDialog(e){this.isVisibleQueryModelDialog=e},onOpenQueryModelDialog(){this.$refs.textSearch.focus()},cancel(){this.$emit("onCancel"),this.form={category:void 0,brand:void 0,model:void 0},this.queryModel.textSearch=null},async loadDeviceCategories(e){const t=await g["a"].getDeviceTypes();this.deviceCategories=t.filter(t=>{var i;return t.name.toLowerCase().includes(null===(i=e.textSearch)||void 0===i?void 0:i.toLowerCase())})},async save(){try{const e=await d["a"].createDeviceModel({categoryId:this.form.category.id,brand:this.form.brand,model:this.form.model});this.form={category:void 0,brand:void 0,model:void 0},this.$toastr.s("Se creo con exito"),this.$emit("onSave",e)}catch(e){this.errorMessage=this.getErrorMessage(e)}}}},f=b,m=i("2877"),C=Object(m["a"])(f,h,v,!1,null,null,null),y=C.exports,M=i("4cf1"),w={name:"DeviceModelBlock",components:{NewDeviceModelForm:y,ChecklistItemsList:()=>i.e("chunk-2b03b248").then(i.bind(null,"2a59"))},mixins:[c["a"],r["a"]],props:{orderDevice:Object},data(){return{dialogClientWidth:"40%",queryModel:{textSearch:null,pageSize:10,pageNumber:1},isVisibleQueryModelDialog:!1,isVisibleChecklistDialog:!1,isVisibleNewDeviceModelDialog:!1,deviceModels:[],deviceModelsMetadata:[],deviceModelSelected:this.orderDevice||{id:null},CategoryEnumDict:n["d"],items:[]}},created(){window.addEventListener("resize",a.a.debounce(this.resizeDialogWidth,200)),this.resizeDialogWidth()},destroyed(){window.removeEventListener("resize",a.a.debounce(this.resizeDialogWidth,200))},watch:{"queryModel.textSearch":{deep:!0,handler:a.a.debounce((async function(){await this.loadDeviceModels(this.queryModel)}),300)}},computed:{deviceBrand(){return this.deviceModelSelected.brand?this.deviceModelSelected.brand:this.deviceModelSelected.deviceModel.brand},deviceModel(){return this.deviceModelSelected.model?this.deviceModelSelected.model:this.deviceModelSelected.deviceModel.model}},methods:{onDeviceModelCreate(e){this.clickDeviceModel(e),this.showNewDeviceModelDialog(!1)},clickDeviceModel(e){const t=this.$store.state.checklistItems.entities.map(e=>({checklistId:e.id,name:e.name,value:!1}));this.deviceModelSelected=e,this.deviceModelSelected.checklistItems=t,this.showDeviceModelDialog(!1),this.$emit("onDeviceModelSelected",this.deviceModelSelected)},selectDeviceModel(){this.showDeviceModelDialog(!1),this.$emit("onDeviceModelSelected",this.deviceModelSelected)},showDeviceModelDialog(e){this.isVisibleQueryModelDialog=e},showChecklistDialog(e){this.isVisibleChecklistDialog=e},showNewDeviceModelDialog(e){this.isVisibleNewDeviceModelDialog=e},onCloseQueryModelDialog(){this.queryModel.textSearch=null,this.deviceModels=[]},onOpenQueryModelDialog(){this.$refs.textSearch.focus()},onOpenChecklistDialog(){this.items=u["c"].mergeChecklistItems(this.deviceModelSelected.checklistItems)},onCloseChecklistDialog(){this.orderDevice.checklistItems=this.items,this.deviceModelSelected.checklistItems=this.items,this.items=[]},async loadDeviceModels(e){try{const t=await d["a"].getAllDeviceModels(e);this.deviceModels=t.data,this.deviceModelsMetadata=t.metadata}catch(c){this.$message.error(this.getErrorMessage(c))}},resizeDialogWidth(){this.dialogClientWidth=this.getPercentageWidth()},handleNextStep(){const e=this.$store.state.quickStart.step;this.$store.dispatch(M["b"],{step:e+1})}}},D=w,k=(i("1740"),Object(m["a"])(D,s,l,!1,null,null,null));t["default"]=k.exports},c47d:function(e,t,i){}}]);
//# sourceMappingURL=chunk-166b1eab.885fa0ae.js.map