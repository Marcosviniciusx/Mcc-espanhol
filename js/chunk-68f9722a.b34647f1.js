(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68f9722a"],{"097c":function(t,e,s){"use strict";var i=s("4081");const a=i["c"].mapGetResponse,r=t=>{const e={};for(let a=0;a<t.length;a++){const r=t[a];e[r.id]={};for(let t=0;t<r.orderDeviceServices.length;t++){var s;const i=r.orderDeviceServices[t];e[r.id][i.id]={...i,name:(null===(s=i.serviceCategory)||void 0===s?void 0:s.name)||i.name||"- Servicio",type:"Servicio",quantity:1,total:1*i.price}}for(let t=0;t<r.orderDeviceProducts.length;t++){var i;const s=r.orderDeviceProducts[t];e[r.id][s.id]={...s,name:(null===(i=s.productCategory)||void 0===i?void 0:i.name)||s.name||"- Producto",type:"Producto",quantity:s.quantity,total:s.price*s.quantity}}}return e};e["a"]={mapGetResponse:a,mapGetBreakdownResume:r}},"125e":function(t,e,s){"use strict";s("7f63")},"6c23":function(t,e,s){"use strict";s.r(e);s("14d9");var i=function(){var t,e,s=this,i=s._self._c;return i("app-layout",[i("div",{staticClass:"flex flex-col items-center pb-32"},[i("div",{staticClass:"w-full px-6 pt-6 2xl:w-3/5 2xl:px-0"},[i("div",{staticClass:"w-full mb-4 space-y-4"},[i("div",{staticClass:"flex flex-col md:flex-row py-4"},[i("div",{staticClass:"flex flex-row items-center"},[i("sa-icon-button",{attrs:{"with-bg":"",iconClass:"bx bx-left-arrow-alt"},on:{click:function(t){return s.$router.push({name:"orders.read",params:{id:s.order.id}})}}}),i("span",{staticClass:"mx-2 text-lg font-bold"},[s._v(" Factura ")])],1),i("div",{staticClass:"flex flex-row items-center ml-auto"},[i("div",{staticClass:"whitespace-nowrap"},[s.id&&!s.isMobile?i("el-dropdown",{staticClass:"mx-2",attrs:{"split-button":"",type:"warning"},on:{click:s.print,command:s.print}},[i("span",[s._v("Imprimir")]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"default"}},[s._v("Carta")]),i("el-dropdown-item",{attrs:{disabled:""}},[s._v("TÃ©rmico")]),i("el-dropdown-item",{attrs:{command:"sticker"}},[s._v("Sticker")])],1)],1):s._e(),s.id&&s.isMobile?i("el-button-group",{staticClass:"mr-2",staticStyle:{"margin-top":"-6px"}},[i("span",{staticClass:"el-button el-button--warning p-2",on:{click:s.print}},[i("i",{staticClass:"text-md bx bx-printer"})]),i("el-dropdown",{attrs:{trigger:"click"},on:{command:s.print}},[i("span",{staticClass:"el-button el-button--warning p-2"},[i("i",{staticClass:"text-md el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"default"}},[s._v("Carta")]),i("el-dropdown-item",{attrs:{disabled:""}},[s._v("TÃ©rmico")]),i("el-dropdown-item",{attrs:{command:"sticker"}},[s._v("Sticker")])],1)],1)],1):s._e(),s.id?i("el-button",{staticClass:"el-button--success",class:{"p-2":s.isMobile},on:{click:s.whatsapp}},[s.isMobile?s._e():i("span",[s._v("WhatsApp")]),s.isMobile?i("i",{staticClass:"text-md bx bxl-whatsapp"}):s._e()]):s._e(),i("el-button",{staticClass:"el-button--primary",class:{"p-2":s.isMobile},on:{click:function(t){return s.$router.push({name:"orders.index"})}}},[s.isMobile?s._e():i("span",[s._v("Guardar")]),s.isMobile?i("i",{staticClass:"text-md bx bx-save"}):s._e()])],1)])])]),i("div",{staticClass:"w-full lg:w-1/2 items-center text-center m-auto space-y-4 relative",attrs:{id:"print-area"}},[i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"w-full flex flex-col",staticStyle:{"align-items":"center"}},[i("div",[s.logo?i("div",[i("img",{style:s.samiiInvoicesLogoSize,attrs:{src:s.logo,alt:""}})]):s._e(),s.logo?s._e():i("div",[i("span",{staticClass:"font-bold text-3xl font-headline"},[s._v(" "+s._s(s.$store.state.business.name||"Fixme up")+" ")])])]),i("span",{staticClass:"font-bold text-lg"},[s._v(" "+s._s(s.$store.state.business.address)+" ")]),i("span",{staticClass:"font-bold text-lg"},[s._v(" "+s._s(s.phone)+" ")])])]),i("div",{staticClass:"-mx-5 border-t border-gray-200"}),i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"w-full flex flex-col border rounded-sm text-left p-2"},[i("div",{staticClass:"text-md"},[i("strong",[s._v("Fecha de EmisiÃ³n: ")]),s._v(" "+s._s(s.todayDate)+" ")]),i("div",{staticClass:"text-md"},[i("strong",[s._v("Cliente: ")]),s._v(" "+s._s(s.order.client.fullName)+" ")]),s.order.client.dni?i("div",{staticClass:"text-md"},[i("strong",[s._v("Numero de IdentificaciÃ³n: ")]),s._v(" "+s._s(s.order.client.dni)+" ")]):s._e(),s.order.client.contactDescription?i("div",{staticClass:"text-md"},[i("strong",[s._v("DirecciÃ³n: ")]),s._v(" "+s._s(s.order.client.contactDescription)+" ")]):s._e(),i("div",{staticClass:"text-md flex flex-col"},[i("strong",[s._v("Contacto Cliente: ")]),i("span",{staticClass:"pl-4",staticStyle:{"font-size":"14px"}},[i("strong",[s._v("- TelÃ©fono: ")]),s._v(" "+s._s(s.order.client.phone)+" ")]),s.order.client.email?i("span",{staticClass:"pl-4",staticStyle:{"font-size":"14px"}},[i("strong",[s._v("- Correo: ")]),s._v(" "+s._s(s.order.client.email)+" ")]):s._e()]),s.assigned?i("div",{staticClass:"text-md"},[i("strong",[s._v("Asignado: ")]),s._v(" "+s._s(s.assigned)+" ")]):s._e(),s.dueDate?i("div",{staticClass:"text-md"},[i("strong",[s._v("Fecha Compromiso: ")]),s._v(" "+s._s(s.dueDate)+" ")]):s._e()])]),i("div",{staticClass:"-mx-5 border-t border-gray-200"}),i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"w-full text-xl border bill-container rounded-sm"},[s._v(s._s(s.order.reference))])]),i("div",{staticClass:"-mx-5 border-t border-gray-200"}),null!==(t=s.order.orderDevices)&&void 0!==t&&t.length?i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"w-full"},[i("div",{staticClass:"border bill-container"},[s._v("DATOS DE EQUIPO")]),i("div",{staticClass:"border block w-full overflow-x-auto"},[i("div",{staticClass:"w-full flex flex-row border-b"},[i("div",{staticClass:"w-1/12 font-bold text-left px-2"},[s._v(" # ")]),i("div",{staticClass:"w-5/12 font-bold text-left px-2"},[s._v(" Modelo ")]),i("div",{staticClass:"w-3/12 font-bold text-right px-2"},[s._v(" Cantidad ")]),i("div",{staticClass:"w-3/12 font-bold text-right px-2"},[s._v(" Precio ")])]),s._l(s.order.orderDevices,(function(t,e){return i("div",{key:t.id,staticClass:"w-full flex flex-row border-b"},[i("div",{staticClass:"w-1/12 text-left px-2"},[s._v(" "+s._s(e+1)+"- ")]),i("div",{staticClass:"w-11/12 text-left px-2"},[i("div",[s._v(s._s(`${t.deviceModel.brand} - ${t.deviceModel.model}`))]),i("div",[s._v("IMEI: "+s._s(t.imei))]),1===t.deviceLockType?i("div",[s._v(" PASSCODE: "+s._s(t.passcode)+" ")]):s._e(),2===t.deviceLockType?i("div",[s._v(" PATRON: "+s._s(t.pattern)+" ")]):s._e(),i("div",{staticClass:"border-t py-2"},[s._l(s.breakdownResume[t.id],(function(t){return i("div",{key:t.id,staticClass:"w-full flex flex-col border-b"},[i("div",{staticClass:"w-full flex flex-row"},[i("div",{staticClass:"w-1/12 text-left px-2",staticStyle:{"word-break":"break-word"}}),i("div",{staticClass:"w-5/12 text-left px-2",staticStyle:{"word-break":"break-word"}},[s._v(" - "+s._s(t.name)+" ")]),i("div",{staticClass:"w-3/12 text-right px-2",staticStyle:{"word-break":"break-word"}},[s._v(" "+s._s(t.quantity)+" ")]),i("div",{staticClass:"w-3/12 text-right px-2",staticStyle:{"word-break":"break-word"}},[s._v(" "+s._s(s.moneyFormat(t.price))+" ")])])])})),t.hasWarranty?i("div",{staticClass:"w-full"},[s._v(" GarantÃ­a: "+s._s(`${t.warrantyDays} ${1===t.warrantyDays?"Dia":"Dias"}`)+" ")]):s._e()],2)])])}))],2)])]):s._e(),i("div",{staticClass:"-mx-5 border-t border-gray-200"}),null!==(e=s.order.orderProducts)&&void 0!==e&&e.length?i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"w-full"},[i("div",{staticClass:"border bill-container"},[s._v("VENTAS")]),i("div",{staticClass:"border block w-full overflow-x-auto"},[i("div",{staticClass:"w-full flex flex-row border-b"},[i("div",{staticClass:"w-1/12 font-bold text-left px-2"},[s._v(" # ")]),i("div",{staticClass:"w-5/12 font-bold text-left px-2"},[s._v(" Producto ")]),i("div",{staticClass:"w-3/12 font-bold text-left px-2"},[s._v(" Cantidad ")]),i("div",{staticClass:"w-3/12 font-bold text-right px-2"},[s._v(" Precio ")])]),s._l(s.order.orderProducts,(function(t,e){return i("div",{key:t.id,staticClass:"w-full flex flex-row border-b"},[i("div",{staticClass:"w-1/12 text-left px-2"},[s._v(" "+s._s(e+1)+"- ")]),i("div",{staticClass:"w-5/12 text-left px-2"},[s._v(" "+s._s(t.name)+" ")]),i("div",{staticClass:"w-3/12 text-left px-2"},[s._v(" "+s._s(t.quantity||1)+" ")]),i("div",{staticClass:"w-3/12 text-right px-2"},[s._v(" "+s._s(s.moneyFormat(t.price*(t.quantity||1)))+" ")])])}))],2)])]):s._e(),i("div",{staticClass:"-mx-5 border-t border-gray-200"}),i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"w-full"},[i("div",{staticClass:"border bill-container"},[s._v("PRESUPUESTO")]),i("div",{staticClass:"border block w-full overflow-x-auto"},[i("div",{staticClass:"w-full flex flex-row border-b"},[i("div",{staticClass:"w-4/12 font-bold text-left px-2 border-r"},[s._v(" Total ")]),i("div",{staticClass:"w-4/12 font-bold text-left px-2 border-r"},[s._v(" Anticipo ")]),i("div",{staticClass:"w-4/12 font-bold text-left px-2"},[s._v(" Adeudo ")])]),i("div",{staticClass:"w-full flex flex-row border-b"},[i("div",{staticClass:"w-4/12 text-right px-2 border-r"},[s._v(" "+s._s(s.moneyFormat(s.resume.total))+" ")]),i("div",{staticClass:"w-4/12 text-right px-2 border-r"},[s._v(" "+s._s(s.moneyFormat(s.resume.advance))+" ")]),i("div",{staticClass:"w-4/12 text-right px-2"},[s._v(" "+s._s(s.moneyFormat(s.resume.debit))+" ")])])])])]),i("div",{staticClass:"-mx-5 border-t border-gray-200"}),i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"w-full py-2 pt-12 text-center"},[i("div",{staticClass:"m-auto my-1",staticStyle:{width:"250px",height:"1px","background-color":"black"}}),i("div",[s._v("Nombre y Firma")])])]),i("div",{staticClass:"-m-5 border-t border-gray-200"}),i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"w-full text-center",staticStyle:{"text-align":"-webkit-center"}},[i("qr-code",{staticClass:"pb-2",attrs:{value:s.qrCodeValue,size:"120",level:"H"}}),i("strong",[s._v("Consulta el estado de tu servicio "),i("br"),s._v(" escaneando el QR")])],1)]),i("div",{staticClass:"-m-5 border-t border-gray-200"}),i("div",{staticClass:"w-full items-center text-center py-2"},[i("div",{staticClass:"border bill-container"},[s._v("GARANTÃA")]),i("div",{staticClass:"border text-sm"},[s._v(" Â "+s._s(s.policy)+" ")])])])])])])},a=[],r=(s("13d5"),s("7459")),o=s("cfd9"),l=s("1268"),d=s("097c"),n=s("e419"),c=s("5a50"),v=s("7ab9"),u=s("8266"),p={name:"InvoiceThermal",mixins:[u["a"]],components:{AppLayout:()=>s.e("chunk-2b774e2e").then(s.bind(null,"c987"))},data(){return{id:null,order:{reference:null,client:{fullName:null,phone:null,email:null,contactDescription:null,dni:null},assigned:null,dueDate:null,orderDevices:[],advanceAmount:0,subtotalAmount:0,taxAmount:0,orderAdvances:[],orderProducts:[]},breakdownResume:{},policy:null,isMobile:!1}},created(){window.addEventListener("resize",this.resize),this.resize()},destroyed(){window.removeEventListener("resize",this.resize)},mounted(){this.id=this.$route.params.id,this.load(),this.loadPolicy()},computed:{phone(){const t=this.$store.state.business.phone.split("|");return`+${t[0]} ${t[1]}`},todayDate(){return this.$moment(new Date).format("MM/DD/YYYY hh:mm:ss A")},assigned(){return this.order.assignedToAccount?this.order.assignedToAccount.fullname:null},dueDate(){return this.order.dueDate?this.$moment(this.order.dueDate).format("MM/DD/YYYY"):null},resume(){const t=this.order.subtotalAmount+this.order.taxAmount,e=this.order.orderAdvances.reduce((t,e)=>t-e.advanceAmount,0);return{total:t,advance:e,debit:t+e}},qrCodeValue(){return`${window.location.origin}/my-order-status/${this.id}`},logo(){return v["a"].logo()},samiiInvoicesLogoSize(){const t=localStorage.getItem("samii-invoices-logo-size");return t?JSON.parse(t):{width:"100px !important",height:"100px !important"}}},methods:{whatsapp(){this.order.client.countryCode?Object(n["a"])({code:this.order.client.countryCode,phone:this.order.client.phone,text:`Hola te envÃ­o el comprobante de tu orden.${c["u"].br}${c["u"].br}*${this.qrCodeValue}*`}):this.$toastr.e("El Cliente debe tener registrado el CÃ³digo de Area")},print(t){"string"===typeof t?this.$router.push({name:"invoices."+t,params:{id:this.id}}):window.print()},async load(){const t=await o["a"].getById(this.id);this.order=d["a"].mapGetResponse(t),this.breakdownResume=d["a"].mapGetBreakdownResume(this.order.orderDevices)},async loadPolicy(){const{policy:t}=await r["a"].PoliciesAndTemplates.read();t&&(this.policy=t)},moneyFormat(t){const{currencySymbol:e}=this.$store.state.account;return l["a"].moneyFormat(t,e)},resize(){const t=this.getPercentageWidth();this.isMobile="90%"===t}}},m=p,x=(s("125e"),s("2877")),b=Object(x["a"])(m,i,a,!1,null,"3336ca78",null);e["default"]=b.exports},"7f63":function(t,e,s){}}]);
//# sourceMappingURL=chunk-68f9722a.b34647f1.js.map