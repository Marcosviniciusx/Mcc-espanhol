(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cc8d6a2"],{"078a":function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e._self._c;return a("div",{staticClass:"flex flex-col"},[e.withTitle?a("div",{staticClass:"flex flex-row items-center"},[a("span",{staticClass:"text-lg font-bold"},[e._v("Crear proveedor")]),a("div",{staticClass:"ml-auto"},[a("sa-icon-button",{attrs:{"with-bg":"",iconClass:"text-xl bx bx-x"},on:{click:e.cancel}})],1)]):e._e(),a("div",{staticClass:"py-2"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSavingSupplier,expression:"loadingSavingSupplier"}],ref:"supplierForm",attrs:{model:e.supplier,rules:e.formRules}},[a("el-form-item",{attrs:{prop:"company"}},[a("span",[e._v("Empresa")]),a("el-input",{model:{value:e.supplier.company,callback:function(a){e.$set(e.supplier,"company",a)},expression:"supplier.company"}})],1),a("el-form-item",{attrs:{prop:"webpage"}},[a("span",[e._v("Sitio web")]),a("el-input",{model:{value:e.supplier.webpage,callback:function(a){e.$set(e.supplier,"webpage",a)},expression:"supplier.webpage"}})],1),a("el-form-item",{attrs:{prop:"contactFullName"}},[a("span",[e._v("Nombre del contacto")]),a("el-input",{model:{value:e.supplier.contactFullName,callback:function(a){e.$set(e.supplier,"contactFullName",a)},expression:"supplier.contactFullName"}})],1),a("el-form-item",{attrs:{prop:"contactEmail"}},[a("span",[e._v("E-mail de contacto")]),a("el-input",{model:{value:e.supplier.contactEmail,callback:function(a){e.$set(e.supplier,"contactEmail",a)},expression:"supplier.contactEmail"}})],1),a("el-form-item",{attrs:{prop:"contactPhone"}},[a("span",[e._v("TelÃ©fono de contacto")]),a("el-input",{model:{value:e.supplier.contactPhone,callback:function(a){e.$set(e.supplier,"contactPhone",a)},expression:"supplier.contactPhone"}})],1),a("el-form-item",{attrs:{prop:"contactDescription"}},[a("span",[e._v("Detalles de contacto")]),a("el-input",{attrs:{type:"textarea"},model:{value:e.supplier.contactDescription,callback:function(a){e.$set(e.supplier,"contactDescription",a)},expression:"supplier.contactDescription"}})],1)],1)],1),e.errorMessage?a("div",[a("span",{staticClass:"text-red-500"},[e._v(e._s(e.errorMessage))])]):e._e(),a("div",{staticClass:"flex justify-end flex-row space-x-4"},[a("sa-button",{attrs:{type:"secondary"},on:{click:e.cancel}},[e._v(" Cancelar ")]),a("sa-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingSavingSupplier,expression:"loadingSavingSupplier"}],attrs:{type:"primary"},on:{click:e.save}},[e._v(" Guardar ")])],1)])},i=[],s=t("5a50"),n=t("fb60"),o=t("0517"),r={name:"SupplierForm",props:{supplier:{type:Object,default:()=>({id:null,company:null,webpage:null,contactFullName:null,contactEmail:null,contactPhone:null,contactDescription:null,sendEmailNotifications:!1})},withTitle:{type:Boolean,default:()=>!1}},mixins:[o["a"]],data(){return{formRules:{company:[{required:!0,message:"Captura el nombre de la empresa"}],webpage:[{required:!1,message:"Captura el sitio web de la empresa"}],contactFullName:[{required:!1,message:"Captura nombre y apellido de la persona de contacto"}],contactEmail:[{required:!1,message:"Captura un email de contacto"},{type:"email",message:"Email invÃ¡lido",trigger:["blur","change"]}],contactPhone:[{required:!0,message:"Captura un telÃ©fono de contacto"}],contactDescription:[{required:!1,message:"DescripciÃ³n del proveedor"}]},errorMessage:null,loadingSavingSupplier:!1,contactTypes:[]}},created(){this.contactTypes=this.loadContactTypes()},methods:{cancel(){this.$emit("onCancel")},async save(){this.$refs["supplierForm"].validate(async e=>{e&&await this.saveSupplier()})},async saveSupplier(){try{var e,a;this.loadingSavingSupplier=!0;const t=this.supplier.id?await n["a"].update(this.supplier.id,{...this.supplier,contactType:s["e"].Phone,contactEmail:(null===(a=this.supplier.contactEmail)||void 0===a?void 0:a.toLowerCase())||""}):await n["a"].create({...this.supplier,contactType:s["e"].Phone,contactEmail:(null===(e=this.supplier.contactEmail)||void 0===e?void 0:e.toLowerCase())||""});this.$emit("onSaved",t)}catch(o){this.errorMessage=this.getErrorMessage(o),this.loadingSavingSupplier=!1}},loadContactTypes(){return[{id:s["e"].Phone,label:"TelÃ©fono"},{id:s["e"].Whatsapp,label:"Whatsapp"},{id:s["e"].Email,label:"Email"},{id:s["e"].Other,label:"Otro"}]}}},c=r,p=t("2877"),u=Object(p["a"])(c,l,i,!1,null,null,null);a["default"]=u.exports},fb60:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var l=t("c177");class i{static async getAll(e){var a;const t=await l["a"].submit({method:"get",url:"suppliers",parameters:{textSearch:e}});return null!==(a=t.data)&&void 0!==a?a:null}static async getbyId(e){var a;const t=await l["a"].submit({method:"get",url:"suppliers/"+e});return null!==(a=t.data)&&void 0!==a?a:null}static async create(e){var a;const t=await l["a"].submit({method:"post",url:"suppliers",data:e});return null!==(a=t.data)&&void 0!==a?a:null}static async update(e,a){var t;const i=await l["a"].submit({method:"put",url:"suppliers/"+e,data:a});return null!==(t=i.data)&&void 0!==t?t:null}static async remove(e){var a;const t=await l["a"].submit({method:"delete",url:"suppliers/"+e});return null!==(a=t.data)&&void 0!==a?a:null}}}}]);
//# sourceMappingURL=chunk-0cc8d6a2.f977d6f4.js.map