(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc0480fe"],{"873e":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e._self._c;return a("div",[a("content-card",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{title:"Imagenes"}},[a("div",{staticClass:"flex flex-col"},[a("div",{staticClass:"my-2"},[e.maxImagesLimitReached?e._e():a("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.imageUpload}}),e._l(e.images,(function(t){return a("div",{key:t,staticClass:"relative"},[a("sa-icon-button",{attrs:{iconClass:"text-4xl bx bx-minus-circle text-red-500 absolute top-5 right-1"},on:{click:function(a){return e.deleteImage(t)}}}),a("img",{attrs:{src:e.getImageSrc(t),alt:"img",width:"300px"}})],1)}))],2)])])],1)},i=[],n=t("4081"),r=t("8809"),l=t("0517"),o=t("2ef0"),c=t.n(o),d={name:"ImagesBlock",mixins:[l["a"]],components:{ContentCard:()=>Promise.resolve().then(t.bind(null,"3246"))},data(){return{loading:!1,errorMessage:void 0}},computed:{images(){return n["e"].order.images},maxImagesLimitReached(){return this.images.length>=3}},watch:{errorMessage:{deep:!0,handler:c.a.debounce((async function(){this.errorMessage&&(await this.$toastr.e(this.errorMessage),this.errorMessage=void 0)}),300)}},methods:{getImageSrc(e){return"https://s3.amazonaws.com/documents.prod.samiiweb.com/"+e},async imageUpload(e){var a,t;if(null!==e&&void 0!==e&&null!==(a=e.target)&&void 0!==a&&null!==(t=a.files)&&void 0!==t&&t.length){const a=new FileReader;a.readAsDataURL(e.target.files[0]),a.onload=async()=>{await this.createImage(e.target.files[0])}}},async createImage(e){this.loading=!0;try{const a=new FormData;a.append("File",e),a.append("Type",1);const t=await r["a"].create(a);n["d"].pushImage(t)}catch(a){this.errorMessage=this.getErrorMessage(a)}finally{this.loading=!1}},async deleteImage(e){this.loading=!0;try{const a={files:[e]};await r["a"].delete(a),n["d"].filterImage(e)}catch(a){this.errorMessage=this.getErrorMessage(a)}finally{this.loading=!1}}}},g=d,u=t("2877"),m=Object(u["a"])(g,s,i,!1,null,null,null);a["default"]=m.exports},8809:function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));var s=t("c177");class i{static async create(e){var a;const t=await s["a"].submit({method:"post",url:"Files",data:e});return null!==(a=null===t||void 0===t?void 0:t.data)&&void 0!==a?a:null}static async delete(e){var a;const t=await s["a"].submit({method:"delete",url:"Files",data:e});return null!==(a=null===t||void 0===t?void 0:t.data)&&void 0!==a?a:null}}}}]);
//# sourceMappingURL=chunk-cc0480fe.3b148a40.js.map